import{aY as M,z as J,ai as k,k as $,an as V,aP as ee,aZ as te,a_ as ne,a$ as re,af as ae,aE as ie,b0 as se,a8 as oe,l as ue,b1 as ce,a4 as fe,ar as le,b2 as de,b3 as ge,b4 as he,b5 as _e,ab as pe,aW as me}from"./CHd-ugWw.js";import{s as ve,g as K,a as be}from"./_AQnmwPs.js";import"./Bzak7iHL.js";import"./CiPh4DN7.js";import{b as w}from"./CdiMsAGd.js";import"./cxm3CNOu.js";let P=!1,A=Symbol();function nt(e,n,t){const r=t[n]??(t[n]={store:null,source:J(void 0),unsubscribe:M});if(r.store!==e&&!(A in t))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=M;else{var i=!0;r.unsubscribe=ve(e,s=>{i?r.source.v=s:k(r.source,s)}),i=!1}return e&&A in t?K(e):$(r.source)}function rt(){const e={};function n(){V(()=>{for(var t in e)e[t].unsubscribe();ee(e,A,{enumerable:!1,value:!0})})}return[e,n]}function Se(e){var n=P;try{return P=!1,[e(),P]}finally{P=n}}function at(e,n,t,r){var T;var i=!le||(t&de)!==0,s=(t&ce)!==0,u=(t&he)!==0,o=r,a=!0,c=()=>(a&&(a=!1,o=u?fe(r):r),o),f;if(s){var l=pe in e||me in e;f=((T=te(e,n))==null?void 0:T.set)??(l&&n in e?g=>e[n]=g:void 0)}var d,m=!1;s?[d,m]=Se(()=>e[n]):d=e[n],d===void 0&&r!==void 0&&(d=c(),f&&(i&&ne(),f(d)));var p;if(i?p=()=>{var g=e[n];return g===void 0?c():(a=!0,g)}:p=()=>{var g=e[n];return g!==void 0&&(o=void 0),g===void 0?o:g},i&&(t&re)===0)return p;if(f){var v=e.$$legacy;return(function(g,x){return arguments.length>0?((!i||!x||v||m)&&f(x?p():g),g):p()})}var _=!1,h=((t&ge)!==0?oe:ue)(()=>(_=!1,p()));s&&$(h);var F=ie;return(function(g,x){if(arguments.length>0){const L=x?$(h):i&&s?ae(g):g;return k(h,L),_=!0,o!==void 0&&(o=L),g}return _e&&_||(F.f&se)!==0?h.v:$(h)})}let W;const X="en",Z=["en","de","uk","ru"];let E=()=>X;const Te=e=>{typeof e=="function"?E=N(e):E=N(()=>e),W!==void 0&&W(E())};function N(e){return()=>{const n=e();if(!q(n))throw new Error("languageTag() didn't return a valid language tag. Check your setLanguageTag call");return n}}const xe=e=>{W=e};function q(e){return Z.includes(e)}const Le=Object.freeze(Object.defineProperty({__proto__:null,availableLanguageTags:Z,isAvailableLanguageTag:q,get languageTag(){return E},onSetLanguageTag:xe,setLanguageTag:Te,sourceLanguageTag:X},Symbol.toStringTag,{value:"Module"})),we=()=>{const e=be;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},Pe={subscribe(e){return we().page.subscribe(e)}};function Ie(e,n){if(e==="")return"";const t=new URL(e,n).pathname;return t.endsWith("/")?t.slice(0,-1):t}function R(e,n){const t=Re(e),r=$e(t,n),[i,s]=Ee(r);return[i,s]}const C=(e,n,t)=>[n,e,t??""].filter(r=>r!=="/").join("")||"/";function $e(e,n){const t=e.replace(n,"");return t.startsWith("/")?t:`/${t}`}function Ee(e){const t=["/.html__data.json","/__data.json"].find(r=>e.endsWith(r));return t?[e.slice(0,-t.length)||"/",t]:[e,void 0]}function Re(e){try{return decodeURI(e)}catch{return e}}const ye=e=>({url:n})=>{try{const[t,r]=R(n.pathname,w),i=e.getLanguageFromLocalisedPath(t);if(!i)return n.pathname;const s=e.getCanonicalPath(t,i);return C(s,w,r)}catch{return n.pathname}};function Oe(e){return`/${e.split("/").filter(Boolean).join("/")}`}function Be(e){const n=e.map(t=>typeof t=="string"?r=>r===t:r=>t.test(r));return t=>n.some(r=>r(Oe(t)))}const I="rtl",O="ltr";function je(e){try{const n=new Intl.Locale(e);return"textInfo"in n?n.textInfo.direction===I?I:O:n.getTextInfo().direction===I?I:O}catch{return O}}function De(e){const n=e.map(t=>[t,je(t)]);return Object.fromEntries(n)}const Ae=0,U=1,y=2,We=4,b=0,S=1,B=2;function Ce(e){const n=Fe(ze);return e.sort((t,r)=>{var i,s,u,o,a,c;const f=Y(t).map(n),l=Y(r).map(n);for(let d=0;d<Math.max(f.length,l.length);d+=1){const m=f[d],p=l[d];if(!m)return-1;if(!p)return 1;for(let v=0;v<Math.max(m.length,p.length);v+=1){const _=m[v],h=p[v];if((_==null?void 0:_[b])||(h==null?void 0:h[b])){if(!_)return-1;if(!h)return 1;const T=((i=m[v+1])==null?void 0:i[S])||((u=(s=f[d+1])==null?void 0:s[0])==null?void 0:u[S]),g=((o=p[v+1])==null?void 0:o[S])||((c=(a=l[d+1])==null?void 0:a[0])==null?void 0:c[S]),x=T&&g,L=T&&!g,z=!T&&g;if((_[b]&&h[b])===y){if(x)continue;if(L)return-1;if(z)return 1}if(_[b]===y)return L?-1:1;if(h[b]===y)return z?1:-1;if(_[B]!==h[B])return(-1)**+_[B];if(_[b]!==h[b])return(-1)**+(_[b]>h[b])}else if((_==null?void 0:_[S])!==(h==null?void 0:h[S]))return Me(_[S],h[S])}}return t<r?1:-1})}function Fe(e){const n=new Map;return t=>(n.has(t)||n.set(t,e(t)),n.get(t))}function ze(e){const n=[];let t=0;for(;t<=e.length;){const r=e.indexOf("[",t),i=r===-1;if(n.push([Ae,e.slice(t,i?void 0:r),!1]),i)break;const s=e[r+1]==="["?U:e[r+1]==="."?y:We,u=s===U?"]]":"]",o=e.indexOf(u,r);if(o===-1)throw new Error(`Invalid route definition ${e}`);const a=e.slice(r,t=o+u.length);n.push([s,a,a.includes("=")])}return n}const Y=e=>e.replace(/\[\[[^\]]+\]\](?!$)/g,"").split("/").filter(Boolean);function Me(e,n){if(e===n)return 0;let t=0;for(;e[t]===n[t];)t++;return e[t]?n[t]?e[t]<n[t]?-1:1:-1:1}const Ne=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function Ue(e){const n=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${Q(e).map(r=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(r);if(i)return n.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const s=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(r);if(s)return n.push({name:s[1],matcher:s[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!r)return;const u=r.split(/\[(.+?)\](?!\])/);return"/"+u.map((a,c)=>{if(c%2){if(a.startsWith("x+"))return j(String.fromCharCode(parseInt(a.slice(2),16)));if(a.startsWith("u+"))return j(String.fromCharCode(...a.slice(2).split("-").map(v=>parseInt(v,16))));const f=Ne.exec(a);if(!f)throw new Error(`Invalid param: ${a}`);const[,l,d,m,p]=f;return n.push({name:m,matcher:p,optional:!!l,rest:!!d,chained:d?c===1&&u[0]==="":!1}),d?"(.*?)":l?"([^/]*)?":"([^/]+?)"}return j(a)}).join("")}).join("")}/?$`),params:n}}function Ye(e,n,t){const r={},i=e.slice(1),s=i.filter(o=>o!==void 0);let u=0;for(const[o,a]of n.entries()){let c=i[o-u];if(a.chained&&a.rest&&u&&(c=i.slice(o-u,o+1).filter(l=>l).join("/"),u=0),c===void 0){a.rest&&(r[a.name]="");continue}if(a.matcher&&!t[a.matcher])return;if((t[a.matcher]??(()=>!0))(c)){r[a.name]=c;const l=n[o+1],d=i[o+1];l&&!l.rest&&l.optional&&d&&a.chained&&(u=0),!l&&!d&&Object.keys(r).length===s.length&&(u=0);continue}if(a.optional&&a.chained){u++;continue}return}if(!u)return r}function j(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}const ke=/\[(\[)?(\.\.\.)?(\w+?)(?:=(\w+))?\]\]?/g;function G(e,n){return"/"+Q(e).map(t=>t.replace(ke,(r,i,s,u)=>{const o=n[u];if(!o){if(i||s&&o!==void 0)return"";throw new Error(`Missing parameter '${u}' in route ${e}`)}if(o[0]=="/"||o.endsWith("/"))throw new Error(`Parameter '${u}' in route ${e} cannot start or end with a slash`);return o})).filter(Boolean).join("/")}function H(e,n,t){const r=Ce(n);for(const i of r){const s=Ue(i),u=s.pattern.exec(Ke(e));if(!u)continue;const o=Ye(u,s.params,t);if(o)return{params:o,id:i}}}const Ke=e=>e.endsWith("/")?e.slice(0,-1):e,Q=e=>e.slice(1).split("/");function Xe(e,n,t,r,i){function s(a){const f=a.split("/")[1];if(e.includes(f)&&(i==="always"||f!==n))return f;if(i==="never")return n}function u(a,c){const f=a.endsWith("/")&&a!=="/";a=f?a.slice(0,-1):a;let l=qe(a,c,t,r);return f&&(l+="/"),(i==="always"||c!==n)&&(l=`/${c}${l}`),l}function o(a,c){const f=a.endsWith("/")&&a!=="/";(i==="always"||c!==n)&&(a=a.replace(`/${c}`,"")||"/");const l=f;a=l?a.slice(0,-1):a;let d=Ze(a,c,t,r);return l&&(d+="/"),d}return{getLanguageFromLocalisedPath:s,getLocalisedPath:u,getCanonicalPath:o}}function Ze(e,n,t,r){for(const[i,s]of Object.entries(t)){if(!(n in s))continue;const u=s[n];if(!u)continue;const o=H(e,[u],r);if(o)return G(i,o.params)}return e}function qe(e,n,t,r){const i=H(e,Object.keys(t),r);if(!i)return e;const s=t[i.id];if(!s)return e;const u=s[n];return u?G(u,i.params):e}function Ge(e,n){const t={},r=[],i=e.sourceLanguageTag,s={defaultLanguageTag:i,runtime:e,translations:t,matchers:{},exclude:Be(r),prefixDefaultLanguage:"never",textDirection:De(e.availableLanguageTags),seo:{noAlternateLinks:!1}},u=Xe(e.availableLanguageTags,i,s.translations,s.matchers,s.prefixDefaultLanguage);return Object.freeze(t),Object.freeze(s),{config:s,strategy:u,reroute:()=>ye(u),handle:()=>{throw new Error("")},getLanguageFromUrl(o){const a=D(w),[c]=R(o.pathname,a);return s.exclude(c)?s.defaultLanguageTag:u.getLanguageFromLocalisedPath(c)||s.defaultLanguageTag},resolveRoute(o,a=void 0){if(s.exclude(o))return o;const c=D(w),[f,l]=R(o,c);if(a=a??e.languageTag(),!o.startsWith(c))return o;const d=u.getLocalisedPath(f,a);return C(d,c,l)},route(o){const a=D(w),[c,f]=R(o,a),d=u.getLanguageFromLocalisedPath(c)||s.defaultLanguageTag,m=u.getCanonicalPath(c,d);return C(m,a,f)}}}function D(e){return e===""?"":e.startsWith("/")?e:Ie(e,new URL(K(Pe).url))}const it=Ge(Le);export{R as a,rt as b,Pe as c,C as d,it as i,Ie as n,at as p,nt as s};
