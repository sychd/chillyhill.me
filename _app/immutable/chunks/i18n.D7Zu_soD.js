import{ax as se,F as Z,ab as U,T as P,Q as J,R as ie,ay as oe,az as ue,aA as ce,aB as fe,a4 as k,aC as le,aD as de,ak as q,aE as ge,ad as _e,aF as he,aG as pe,S as ve,au as me,a8 as Y,aH as be,q as G,aI as Te}from"./runtime.DouHbVcg.js";import{p as Se}from"./proxy.BsGvQTbp.js";import{s as xe,a as we,g as Le}from"./entry.Blclzu57.js";import"./disclose-version.Bb5JfrXw.js";import"./legacy.DpNgxoQp.js";import{b as R}from"./paths.BgFnu35e.js";let $=!1;function ot(e,t,n){const r=n[t]??(n[t]={store:null,source:Z(void 0),unsubscribe:U});if(r.store!==e)if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=U;else{var i=!0;r.unsubscribe=xe(e,s=>{i?r.source.v=s:J(r.source,s)}),i=!1}return P(r.source)}function ut(){const e={};return se(()=>{for(var t in e)e[t].unsubscribe()}),e}function Pe(e){var t=$;try{return $=!1,[e(),$]}finally{$=t}}function H(e){for(var t=G,n=G;t!==null&&!(t.f&(le|de));)t=t.parent;try{return q(t),e()}finally{q(n)}}function ct(e,t,n,r){var I;var i=(n&ge)!==0,s=!_e||(n&he)!==0,o=(n&pe)!==0,u=(n&Te)!==0,a=!1,c;o?[c,a]=Pe(()=>e[t]):c=e[t];var d=ve in e||me in e,f=((I=ie(e,t))==null?void 0:I.set)??(d&&o&&t in e?_=>e[t]=_:void 0),l=r,p=!0,m=!1,v=()=>(m=!0,p&&(p=!1,u?l=k(r):l=r),l);c===void 0&&r!==void 0&&(f&&s&&oe(),c=v(),f&&f(c));var g;if(s)g=()=>{var _=e[t];return _===void 0?v():(p=!0,m=!1,_)};else{var h=H(()=>(i?Y:be)(()=>e[t]));h.f|=ue,g=()=>{var _=P(h);return _!==void 0&&(l=void 0),_===void 0?l:_}}if(!(n&ce))return g;if(f){var N=e.$$legacy;return function(_,L){return arguments.length>0?((!s||!L||N||a)&&f(L?g():_),_):g()}}var x=!1,w=!1,E=Z(c),T=H(()=>Y(()=>{var _=g(),L=P(E);return x?(x=!1,w=!0,L):(w=!1,E.v=_)}));return i||(T.equals=fe),function(_,L){if(arguments.length>0){const F=L?P(T):s&&o?Se(_):_;return T.equals(F)||(x=!0,J(E,F),m&&l!==void 0&&(l=F),k(()=>P(T))),_}return P(T)}}let z;const V="en",ee=["en","de","uk","ru"];let O=()=>V;const Ee=e=>{typeof e=="function"?O=K(e):O=K(()=>e),z!==void 0&&z(O())};function K(e){return()=>{const t=e();if(!te(t))throw new Error("languageTag() didn't return a valid language tag. Check your setLanguageTag call");return t}}const Ie=e=>{z=e};function te(e){return ee.includes(e)}const Re=Object.freeze(Object.defineProperty({__proto__:null,availableLanguageTags:ee,isAvailableLanguageTag:te,get languageTag(){return O},onSetLanguageTag:Ie,setLanguageTag:Ee,sourceLanguageTag:V},Symbol.toStringTag,{value:"Module"})),$e=()=>{const e=we;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},ye={subscribe(e){return $e().page.subscribe(e)}};function Oe(e,t){if(e==="")return"";const n=new URL(e,t).pathname;return n.endsWith("/")?n.slice(0,-1):n}function B(e,t){const n=Fe(e),r=Be(n,t),[i,s]=Ce(r);return[i,s]}const M=(e,t,n)=>[t,e,n??""].filter(r=>r!=="/").join("")||"/";function Be(e,t){const n=e.replace(t,"");return n.startsWith("/")?n:`/${n}`}function Ce(e){const n=["/.html__data.json","/__data.json"].find(r=>e.endsWith(r));return n?[e.slice(0,-n.length)||"/",n]:[e,void 0]}function Fe(e){try{return decodeURI(e)}catch{return e}}const Ae=e=>({url:t})=>{try{const[n,r]=B(t.pathname,R),i=e.getLanguageFromLocalisedPath(n);if(!i)return t.pathname;const s=e.getCanonicalPath(n,i);return M(s,R,r)}catch{return t.pathname}};function je(e){return`/${e.split("/").filter(Boolean).join("/")}`}function De(e){const t=e.map(n=>typeof n=="string"?r=>r===n:r=>n.test(r));return n=>t.some(r=>r(je(n)))}const y="rtl",A="ltr";function We(e){try{const t=new Intl.Locale(e);return"textInfo"in t?t.textInfo.direction===y?y:A:t.getTextInfo().direction===y?y:A}catch{return A}}function ze(e){const t=e.map(n=>[n,We(n)]);return Object.fromEntries(t)}const Me=0,Q=1,C=2,Ne=4,b=0,S=1,j=2;function Ue(e){const t=ke(qe);return e.sort((n,r)=>{var i,s,o,u,a,c;const d=X(n).map(t),f=X(r).map(t);for(let l=0;l<Math.max(d.length,f.length);l+=1){const p=d[l],m=f[l];if(!p)return-1;if(!m)return 1;for(let v=0;v<Math.max(p.length,m.length);v+=1){const g=p[v],h=m[v];if((g==null?void 0:g[b])||(h==null?void 0:h[b])){if(!g)return-1;if(!h)return 1;const x=((i=p[v+1])==null?void 0:i[S])||((o=(s=d[l+1])==null?void 0:s[0])==null?void 0:o[S]),w=((u=m[v+1])==null?void 0:u[S])||((c=(a=f[l+1])==null?void 0:a[0])==null?void 0:c[S]),E=x&&w,T=x&&!w,I=!x&&w;if((g[b]&&h[b])===C){if(E)continue;if(T)return-1;if(I)return 1}if(g[b]===C)return T?-1:1;if(h[b]===C)return I?1:-1;if(g[j]!==h[j])return(-1)**+g[j];if(g[b]!==h[b])return(-1)**+(g[b]>h[b])}else if((g==null?void 0:g[S])!==(h==null?void 0:h[S]))return Ye(g[S],h[S])}}return n<r?1:-1})}function ke(e){const t=new Map;return n=>(t.has(n)||t.set(n,e(n)),t.get(n))}function qe(e){const t=[];let n=0;for(;n<=e.length;){const r=e.indexOf("[",n),i=r===-1;if(t.push([Me,e.slice(n,i?void 0:r),!1]),i)break;const s=e[r+1]==="["?Q:e[r+1]==="."?C:Ne,o=s===Q?"]]":"]",u=e.indexOf(o,r);if(u===-1)throw new Error(`Invalid route definition ${e}`);const a=e.slice(r,n=u+o.length);t.push([s,a,a.includes("=")])}return t}const X=e=>e.replace(/\[\[[^\]]+\]\](?!$)/g,"").split("/").filter(Boolean);function Ye(e,t){if(e===t)return 0;let n=0;for(;e[n]===t[n];)n++;return e[n]?t[n]?e[n]<t[n]?-1:1:-1:1}const Ge=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function He(e){const t=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${ae(e).map(r=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(r);if(i)return t.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const s=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(r);if(s)return t.push({name:s[1],matcher:s[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!r)return;const o=r.split(/\[(.+?)\](?!\])/);return"/"+o.map((a,c)=>{if(c%2){if(a.startsWith("x+"))return D(String.fromCharCode(parseInt(a.slice(2),16)));if(a.startsWith("u+"))return D(String.fromCharCode(...a.slice(2).split("-").map(v=>parseInt(v,16))));const d=Ge.exec(a);if(!d)throw new Error(`Invalid param: ${a}`);const[,f,l,p,m]=d;return t.push({name:p,matcher:m,optional:!!f,rest:!!l,chained:l?c===1&&o[0]==="":!1}),l?"(.*?)":f?"([^/]*)?":"([^/]+?)"}return D(a)}).join("")}).join("")}/?$`),params:t}}function Ke(e,t,n){const r={},i=e.slice(1),s=i.filter(u=>u!==void 0);let o=0;for(const[u,a]of t.entries()){let c=i[u-o];if(a.chained&&a.rest&&o&&(c=i.slice(u-o,u+1).filter(f=>f).join("/"),o=0),c===void 0){a.rest&&(r[a.name]="");continue}if(a.matcher&&!n[a.matcher])return;if((n[a.matcher]??(()=>!0))(c)){r[a.name]=c;const f=t[u+1],l=i[u+1];f&&!f.rest&&f.optional&&l&&a.chained&&(o=0),!f&&!l&&Object.keys(r).length===s.length&&(o=0);continue}if(a.optional&&a.chained){o++;continue}return}if(!o)return r}function D(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}const Qe=/\[(\[)?(\.\.\.)?(\w+?)(?:=(\w+))?\]\]?/g;function ne(e,t){return"/"+ae(e).map(n=>n.replace(Qe,(r,i,s,o)=>{const u=t[o];if(!u){if(i||s&&u!==void 0)return"";throw new Error(`Missing parameter '${o}' in route ${e}`)}if(u[0]=="/"||u.endsWith("/"))throw new Error(`Parameter '${o}' in route ${e} cannot start or end with a slash`);return u})).filter(Boolean).join("/")}function re(e,t,n){const r=Ue(t);for(const i of r){const s=He(i),o=s.pattern.exec(Xe(e));if(!o)continue;const u=Ke(o,s.params,n);if(u)return{params:u,id:i}}}const Xe=e=>e.endsWith("/")?e.slice(0,-1):e,ae=e=>e.slice(1).split("/");function Ze(e,t,n,r,i){function s(a){const d=a.split("/")[1];if(e.includes(d)&&(i==="always"||d!==t))return d;if(i==="never")return t}function o(a,c){const d=a.endsWith("/")&&a!=="/";a=d?a.slice(0,-1):a;let f=Ve(a,c,n,r);return d&&(f+="/"),(i==="always"||c!==t)&&(f=`/${c}${f}`),f}function u(a,c){const d=a.endsWith("/")&&a!=="/";(i==="always"||c!==t)&&(a=a.replace(`/${c}`,"")||"/");const f=d;a=f?a.slice(0,-1):a;let l=Je(a,c,n,r);return f&&(l+="/"),l}return{getLanguageFromLocalisedPath:s,getLocalisedPath:o,getCanonicalPath:u}}function Je(e,t,n,r){for(const[i,s]of Object.entries(n)){if(!(t in s))continue;const o=s[t];if(!o)continue;const u=re(e,[o],r);if(u)return ne(i,u.params)}return e}function Ve(e,t,n,r){const i=re(e,Object.keys(n),r);if(!i)return e;const s=n[i.id];if(!s)return e;const o=s[t];return o?ne(o,i.params):e}function et(e,t){const n={},r=[],i=e.sourceLanguageTag,s={defaultLanguageTag:i,runtime:e,translations:n,matchers:{},exclude:De(r),prefixDefaultLanguage:"never",textDirection:ze(e.availableLanguageTags),seo:{noAlternateLinks:!1}},o=Ze(e.availableLanguageTags,i,s.translations,s.matchers,s.prefixDefaultLanguage);return Object.freeze(n),Object.freeze(s),{config:s,strategy:o,reroute:()=>Ae(o),handle:()=>{throw new Error("")},getLanguageFromUrl(u){const a=W(R),[c]=B(u.pathname,a);return s.exclude(c)?s.defaultLanguageTag:o.getLanguageFromLocalisedPath(c)||s.defaultLanguageTag},resolveRoute(u,a=void 0){if(s.exclude(u))return u;const c=W(R),[d,f]=B(u,c);if(a=a??e.languageTag(),!u.startsWith(c))return u;const l=o.getLocalisedPath(d,a);return M(l,c,f)},route(u){const a=W(R),[c,d]=B(u,a),l=o.getLanguageFromLocalisedPath(c)||s.defaultLanguageTag,p=o.getCanonicalPath(c,l);return M(p,a,d)}}}function W(e){return e===""?"":e.startsWith("/")?e:Oe(e,new URL(Le(ye).url))}const ft=et(Re);export{ot as a,ye as b,B as c,M as d,ft as i,Oe as n,ct as p,ut as s};
